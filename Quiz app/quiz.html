<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuizCraft | Quiz</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #0f172a;
        color: #fff;
        padding-top: 80px;
      }
      /* Navbar */
      nav {
        background: #020617;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
      }
      .nav-container {
        max-width: 1200px;
        margin: auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 5%;
      }
      nav h3 {
        color: #cbd5f5;
        margin: 0;
      }
      .nav-links {
        display: flex;
        gap: 25px;
      }
      .nav-links a {
        color: #cbd5f5;
        text-decoration: none;
        font-weight: 500;
        transition: 0.3s;
      }
      .nav-links a:hover {
        color: #38bdf8;
      }
      .hamburger {
        display: none;
        flex-direction: column;
        cursor: pointer;
        gap: 5px;
      }
      .hamburger span {
        height: 3px;
        width: 25px;
        background: #cbd5f5;
        border-radius: 3px;
        transition: 0.3s;
      }

      /* Container */
      .container {
        max-width: 500px;
        width: 90%;
        margin: 50px auto;
        background: #020617;
        padding: 25px 35px;
        border-radius: 15px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
      }
      h2 {
        text-align: center;
        margin-bottom: 20px;
        font-size: 22px;
      }
      .score-header {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #94a3b8;
        margin-bottom: 15px;
      }
      .question {
        font-size: 18px;
        margin-bottom: 15px;
      }
      .options button {
        width: 100%;
        background: #1e293b;
        border: none;
        padding: 12px;
        margin: 8px 0;
        border-radius: 8px;
        cursor: pointer;
        text-align: left;
        font-size: 16px;
        color: #fff;
        transition: 0.3s;
      }
      .options button:hover {
        background: #334155;
      }
      .next-btn {
        margin-top: 20px;
        width: 100%;
        padding: 12px;
        background: #38bdf8;
        color: #020617;
        border-radius: 8px;
        cursor: pointer;
        border: none;
        font-size: 18px;
        display: none;
      }
      .next-btn:hover {
        background: #0ea5e9;
      }
      .result {
        text-align: center;
        display: none;
      }
      .result h2 {
        margin-bottom: 15px;
      }

      /* Responsive */
      @media (max-width: 500px) {
        .container {
          padding: 20px;
        }
        h2 {
          font-size: 20px;
        }
        .question {
          font-size: 16px;
        }
        .options button {
          font-size: 14px;
          padding: 10px;
        }
        .next-btn {
          font-size: 16px;
          padding: 10px;
        }
      }
      @media (max-width: 768px) {
        .nav-links {
          position: fixed;
          top: 65px;
          right: -100%;
          flex-direction: column;
          background: #020617;
          width: 200px;
          gap: 0;
          transition: 0.3s;
          padding: 20px;
          border-left: 1px solid #38bdf8;
          height: calc(100vh-65px);
        }
        .nav-links.show {
          right: 0;
        }
        .nav-links a {
          padding: 12px 0;
          border-bottom: 1px solid #334155;
        }
        .hamburger {
          display: flex;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-container">
        <h3>QuizCraft</h3>
        <div class="nav-links" id="navLinks">
          <a href="index.html">Home</a>
          <a href="quiz.html">Quizzes</a>
          <a href="profile.html">Profile</a>
          <a href="about.html">About</a>
        </div>
        <div class="hamburger" id="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="score-header">
        <span>Score: <b id="score">0</b></span>
        <span>Max Score: <b id="max-score">0</b></span>
      </div>

      <h2>Quiz Time</h2>
      <div class="quiz-box">
        <p class="question">Loading question...</p>
        <div class="options"></div>
        <button class="next-btn">Next Question</button>
      </div>

      <div class="result">
        <h2>Your Score</h2>
        <p id="score-text"></p>
        <button
          onclick="location.reload()"
          class="next-btn"
          style="display: block"
        >
          Restart
        </button>
      </div>
    </div>

    <script>
      // Hamburger
      const hamburger = document.getElementById("hamburger");
      const navLinks = document.getElementById("navLinks");
      hamburger.addEventListener("click", () => {
        navLinks.classList.toggle("show");
      });

      // Quiz JS
      const questionEl = document.querySelector(".question");
      const optionsEl = document.querySelector(".options");
      const nextBtn = document.querySelector(".next-btn");
      const resultBox = document.querySelector(".result");
      const quizBox = document.querySelector(".quiz-box");
      const scoreText = document.getElementById("score-text");
      const scoreEl = document.getElementById("score");
      const maxScoreEl = document.getElementById("max-score");

      let currentQuestion = 0;
      let score = 0;
      let questions = [];
      let maxScore = localStorage.getItem("maxScore") || 0;
      maxScoreEl.textContent = maxScore;

      async function loadQuestions() {
        const res = await fetch(
          "https://opentdb.com/api.php?amount=10&type=multiple"
        );
        const data = await res.json();
        questions = data.results;
        showQuestion();
      }

      function showQuestion() {
        nextBtn.style.display = "none";
        const q = questions[currentQuestion];
        let correct = q.correct_answer;
        let answers = [...q.incorrect_answers, correct];
        answers.sort(() => Math.random() - 0.5);
        questionEl.innerHTML = q.question;
        optionsEl.innerHTML = "";
        answers.forEach((opt) => {
          const btn = document.createElement("button");
          btn.innerHTML = opt;
          btn.onclick = () => checkAnswer(btn, correct);
          optionsEl.appendChild(btn);
        });
      }

      function checkAnswer(btn, correct) {
        const options = document.querySelectorAll(".options button");
        options.forEach((o) => (o.disabled = true));
        if (btn.innerHTML === correct) {
          btn.style.background = "#38bdf8";
          btn.style.color = "#020617";
          score++;
          scoreEl.textContent = score;
        } else {
          btn.style.background = "#f87171";
          options.forEach((o) => {
            if (o.innerHTML === correct) {
              o.style.background = "#38bdf8";
              o.style.color = "#020617";
            }
          });
        }
        nextBtn.style.display = "block";
      }

      nextBtn.addEventListener("click", () => {
        currentQuestion++;
        if (currentQuestion < questions.length) {
          showQuestion();
        } else {
          showResult();
        }
      });

      function showResult() {
        quizBox.style.display = "none";
        resultBox.style.display = "block";
        if (score > maxScore) {
          maxScore = score;
          localStorage.setItem("maxScore", maxScore);
        }
        scoreText.innerHTML = `You scored <b>${score}</b> out of <b>${questions.length}</b><br>üèÜ Max Score: <b>${maxScore}</b>`;
      }

      loadQuestions();
    </script>
  </body>
</html>
